<% if @hack.hack_structured_info %>
  <div class="p-6 pt-0">

    <div id="accordion-flush" data-accordion="collapse" data-active-classes="bg-white dark:bg-gray-900 text-gray-900 dark:text-white" data-inactive-classes="text-gray-500 dark:text-gray-400">
      <h4 id="accordion-flush-heading-1">
        <button type="button" class="flex items-center justify-between w-full py-5 font-medium rtl:text-right  text-gray-500 border-b border-gray-200 dark:border-gray-700 dark:text-gray-400 gap-3" data-accordion-target="#accordion-flush-body-1" aria-expanded="true" aria-controls="accordion-flush-body-1">
          <span><%= @hack.hack_structured_info.hack_title %>
          </span>

          <svg data-accordion-icon class="w-3 h-3 rotate-180 shrink-0" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 6">
            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5 5 1 1 5"/>
          </svg>
        </button>
      </h4>
      <div id="accordion-flush-body-1" class="hidden" aria-labelledby="accordion-flush-heading-1">
        <div class="py-4 border-b border-gray-200 dark:border-gray-700">
          <p class="mb-2 text-gray-500 dark:text-gray-400"><%= @hack.hack_structured_info.description %></p>
        </div>
      </div>

      <h4 id="accordion-flush-heading-classifications">
        <button type="button" class="flex items-center justify-between w-full py-5 font-medium rtl:text-right text-gray-500 border-b border-gray-200 dark:border-gray-700 dark:text-gray-400 gap-3" data-accordion-target="#accordion-flush-body-classifications" aria-expanded="false" aria-controls="accordion-flush-body-classifications">
          <span>Classifications</span>
          <svg data-accordion-icon class="w-3 h-3 rotate-180 shrink-0" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 6">
            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5 5 1 1 5"/>
          </svg>
        </button>
      </h4>
      <div id="accordion-flush-body-classifications" class="hidden" aria-labelledby="accordion-flush-heading-2">
        <div class="p-6 border-b border-gray-200 dark:border-gray-700">
          <p class="mb-2 text-gray-500 dark:text-gray-400">
          <ul class="list-disc list-outside text-gray-500 dark:text-gray-400 pl-5">
            <% @hack.clasifications.uniq.each do |classification| %>
              <li class="mb-2">
                <%= classification.name %>
              </li>
            <% end %>
          </ul>
          </p>
        </div>
      </div>

      <h4 id="accordion-flush-heading-categories">
        <button type="button" class="flex items-center justify-between w-full py-5 font-medium rtl:text-right text-gray-500 border-b border-gray-200 dark:border-gray-700 dark:text-gray-400 gap-3" data-accordion-target="#accordion-flush-body-categories" aria-expanded="false" aria-controls="accordion-flush-body-categories">
          <span>Categories</span>
          <svg data-accordion-icon class="w-3 h-3 rotate-180 shrink-0" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 6">
            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5 5 1 1 5"/>
          </svg>
        </button>
      </h4>
      <div id="accordion-flush-body-categories" class="hidden" aria-labelledby="accordion-flush-heading-categories">
        <div class="p-6 border-b border-gray-200 dark:border-gray-700">
          <p class="mb-2 text-gray-500 dark:text-gray-400">
          <ul class="list-disc list-outside text-gray-500 dark:text-gray-400 pl-5">
            <% @hack.hack_category_rels.each do |hack_category_rels| %>
              <li class="mb-2">
                <div class="inline-flex">
                  <h5 class="font-semibold "><%= hack_category_rels.category.name %></h5>
                  <div class="flex items-center py-0.5 ">
                    <svg data-popover-target="category-info-<%= hack_category_rels.category.id %>" data-popover-placement="bottom"
                         class="w-3.5 h-3.5 text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white cursor-pointer ms-1"
                         aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
                      <path d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5Zm0 16a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm1-5.034V12a1 1 0 0 1-2 0v-1.418a1 1 0 0 1 1.038-.999 1.436 1.436 0 0 0 1.488-1.441 1.501 1.501 0 1 0-3-.116.986.986 0 0 1-1.037.961 1 1 0 0 1-.96-1.037A3.5 3.5 0 1 1 11 11.466Z"/>
                    </svg>
                    <div data-popover id="category-info-<%= hack_category_rels.category.id %>" role="tooltip"
                         class="absolute z-10 invisible inline-block text-sm text-gray-500 transition-opacity duration-300 bg-white border border-gray-200 rounded-lg shadow-sm opacity-0 w-72 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-400">
                      <div class="p-3 space-y-2">
                        <p class="text-sm text-gray-600 normal-case font-normal"><%= hack_category_rels.category.description %></p>
                      </div>
                      <div data-popper-arrow></div>
                    </div>
                  </div>
                </div>
                <p><%= hack_category_rels.justification %></p>
              </li>
            <% end %>
          </ul>
          </p>
        </div>
      </div>

      <h4 id="accordion-flush-heading-2">
        <button type="button" class="flex items-center justify-between w-full py-5 font-medium rtl:text-right text-gray-500 border-b border-gray-200 dark:border-gray-700 dark:text-gray-400 gap-3" data-accordion-target="#accordion-flush-body-2" aria-expanded="false" aria-controls="accordion-flush-body-2">
          <span>Main Goal</span>
          <svg data-accordion-icon class="w-3 h-3 rotate-180 shrink-0" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 6">
            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5 5 1 1 5"/>
          </svg>
        </button>
      </h4>
      <div id="accordion-flush-body-2" class="hidden" aria-labelledby="accordion-flush-heading-2">
        <div class="py-5 border-b border-gray-200 dark:border-gray-700">
          <p class="mb-2 text-gray-500 dark:text-gray-400"><%=@hack.hack_structured_info.main_goal %></p>
        </div>
      </div>

      <h4 id="accordion-flush-heading-3">
        <button type="button" class="flex items-center justify-between w-full py-5 font-medium rtl:text-right text-gray-500 border-b border-gray-200 dark:border-gray-700 dark:text-gray-400 gap-3" data-accordion-target="#accordion-flush-body-3" aria-expanded="false" aria-controls="accordion-flush-body-3">
          <span>Steps Summary</span>
          <svg data-accordion-icon class="w-3 h-3 rotate-180 shrink-0" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 6">
            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5 5 1 1 5"/>
          </svg>
        </button>
      </h4>
      <div id="accordion-flush-body-3" class="hidden" aria-labelledby="accordion-flush-heading-3">
        <div class="p-6 border-b border-gray-200 dark:border-gray-700">
          <% steps = JSON.parse(@hack.hack_structured_info.steps_summary) rescue [] %>

          <% if steps.present? %>
            <ol class="list-decimal list-outside pl-5 text-gray-500 dark:text-gray-400">
              <% steps.each do |step| %>
                <li class="mb-4">
                  <p><%= step %></p>
                </li>
              <% end %>
            </ol>
          <% else %>
            <p class="text-gray-500 dark:text-gray-400">No steps available.</p>
          <% end %>
        </div>
      </div>


      <h4 id="accordion-flush-heading-4">
        <button type="button" class="flex items-center justify-between w-full py-5 font-medium rtl:text-right text-gray-500 border-b border-gray-200 dark:border-gray-700 dark:text-gray-400 gap-3" data-accordion-target="#accordion-flush-body-4" aria-expanded="false" aria-controls="accordion-flush-body-4">
          <span>Resources Needed</span>
          <svg data-accordion-icon class="w-3 h-3 rotate-180 shrink-0" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 6">
            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5 5 1 1 5"/>
          </svg>
        </button>
      </h4>
      <div id="accordion-flush-body-4" class="hidden" aria-labelledby="accordion-flush-heading-3">
        <div class="p-6 border-b border-gray-200 dark:border-gray-700">
          <% resources = JSON.parse(@hack.hack_structured_info.resources_needed) rescue [] %>

          <% if resources.present? %>
            <ul class="list-disc list-outside text-gray-500 dark:text-gray-400 pl-5">
              <% resources.each do |resource| %>
                <li class="mb-2">
                  <p><%= resource %></p>
                </li>
              <% end %>
            </ul>
          <% else %>
            <p class="text-gray-500 dark:text-gray-400">No resources available.</p>
          <% end %>
        </div>
      </div>

      <h4 id="accordion-flush-heading-5">
        <button type="button" class="flex items-center justify-between w-full py-5 font-medium rtl:text-right text-gray-500 border-b border-gray-200 dark:border-gray-700 dark:text-gray-400 gap-3" data-accordion-target="#accordion-flush-body-5" aria-expanded="false" aria-controls="accordion-flush-body-5">
          <span>Expected Benefits</span>
          <svg data-accordion-icon class="w-3 h-3 rotate-180 shrink-0" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 6">
            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5 5 1 1 5"/>
          </svg>
        </button>
      </h4>
      <div id="accordion-flush-body-5" class="hidden" aria-labelledby="accordion-flush-heading-3">
        <div class="p-6 border-b border-gray-200 dark:border-gray-700">
          <% benefits = JSON.parse(@hack.hack_structured_info.expected_benefits) rescue [] %>

          <% if benefits.present? %>
            <ul class="list-disc list-outside text-gray-500 dark:text-gray-400 pl-5">
              <% benefits.each do |benefit| %>
                <li class="mb-2">
                  <p><%= benefit %></p>
                </li>
              <% end %>
            </ul>
          <% else %>
            <p class="text-gray-500 dark:text-gray-400">No expected benefits available.</p>
          <% end %>
        </div>
      </div>
      <h4 id="accordion-flush-heading-6">
        <button type="button" class="flex items-center justify-between w-full py-5 font-medium rtl:text-right text-gray-500 border-b border-gray-200 dark:border-gray-700 dark:text-gray-400 gap-3" data-accordion-target="#accordion-flush-body-6" aria-expanded="false" aria-controls="accordion-flush-body-6">
          <span>Extended title</span>
          <svg data-accordion-icon class="w-3 h-3 rotate-180 shrink-0" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 6">
            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5 5 1 1 5"/>
          </svg>
        </button>
      </h4>
      <div id="accordion-flush-body-6" class="hidden" aria-labelledby="accordion-flush-heading-3">
        <div class="py-5 border-b border-gray-200 dark:border-gray-700">
          <p class="mb-2 text-gray-500 dark:text-gray-400"><%= @hack.hack_structured_info.extended_title %></p>
        </div>
      </div>

      <h4 id="accordion-flush-heading-7">
        <button type="button" class="flex items-center justify-between w-full py-5 font-medium rtl:text-right text-gray-500 border-b border-gray-200 dark:border-gray-700 dark:text-gray-400 gap-3" data-accordion-target="#accordion-flush-body-7" aria-expanded="false" aria-controls="accordion-flush-body-7">
          <span>Detailed Steps</span>
          <svg data-accordion-icon class="w-3 h-3 rotate-180 shrink-0" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 6">
            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5 5 1 1 5"/>
          </svg>
        </button>
      </h4>
      <div id="accordion-flush-body-7" class="hidden" aria-labelledby="accordion-flush-heading-3">
        <div class="p-6 border-b border-gray-200 dark:border-gray-700">
          <% begin %>
            <% detailed_steps_string = @hack.hack_structured_info.detailed_steps.gsub('=>', ':') %>
            <% detailed_steps = JSON.parse(detailed_steps_string) %>

            <% if detailed_steps.present? %>
              <ol class="list-decimal list-outside text-gray-500 dark:text-gray-400 pl-5">
                <% detailed_steps.each do |step| %>
                  <li class="mb-4">
                    <h5 class="font-semibold text-gray-500 dark:text-white"><%= step["Step Title"] %></h5>
                    <p class="text-gray-500 dark:text-gray-400"><%= step["Description"] %></p>
                  </li>
                <% end %>
              </ol>
            <% else %>
              <p class="text-gray-500 dark:text-gray-400">No detailed steps available.</p>
            <% end %>
          <% rescue => e %>
            <p>Error parsing JSON: <%= e.message %></p>
          <% end %>
        </div>
      </div>
      <h4 id="accordion-flush-heading-8">
        <button type="button" class="flex items-center justify-between w-full py-5 font-medium rtl:text-right text-gray-500 border-b border-gray-200 dark:border-gray-700 dark:text-gray-400 gap-3" data-accordion-target="#accordion-flush-body-8" aria-expanded="false" aria-controls="accordion-flush-body-8">
          <span>Additional tools resources</span>
          <svg data-accordion-icon class="w-3 h-3 rotate-180 shrink-0" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 6">
            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5 5 1 1 5"/>
          </svg>
        </button>
      </h4>
      <div id="accordion-flush-body-8" class="hidden" aria-labelledby="accordion-flush-heading-3">
        <div class="p-6 border-b border-gray-200 dark:border-gray-700">
          <% additional_tools = JSON.parse(@hack.hack_structured_info.additional_tools_resources) rescue [] %>

          <% if additional_tools.present? %>
            <ul class="list-disc list-outside text-gray-500 dark:text-gray-400 pl-5">
              <% additional_tools.each do |tool| %>
                <li class="mb-2">
                  <p><%= tool %></p>
                </li>
              <% end %>
            </ul>
          <% else %>
            <p class="text-gray-500 dark:text-gray-400">No additional tools or resources available.</p>
          <% end %>
        </div>
      </div>


      <h4 id="accordion-flush-heading-9">
        <button type="button" class="flex items-center justify-between w-full py-5 font-medium rtl:text-right text-gray-500 border-b border-gray-200 dark:border-gray-700 dark:text-gray-400 gap-3" data-accordion-target="#accordion-flush-body-9" aria-expanded="false" aria-controls="accordion-flush-body-9">
          <span>Case Study</span>
          <svg data-accordion-icon class="w-3 h-3 rotate-180 shrink-0" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 6">
            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5 5 1 1 5"/>
          </svg>
        </button>
      </h4>
      <div id="accordion-flush-body-9" class="hidden" aria-labelledby="accordion-flush-heading-3">
        <div class="py-5 border-b border-gray-200 dark:border-gray-700">
          <p class="mb-2 text-gray-500 dark:text-gray-400"><%= @hack.hack_structured_info.case_study %></p>
        </div>
      </div>
    </div>

  </div>
<% end %>